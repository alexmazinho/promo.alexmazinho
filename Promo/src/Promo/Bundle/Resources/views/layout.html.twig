{# src/Promo/Bundle/Resources/views/layout.html.twig #}
{% extends '::base.html.twig' %}

{% block stylesheets %}
    <link media="all" href="{{ asset('css/fonts.css') }}" type="text/css" rel="stylesheet" >
    <link media="all" href="{{ asset('css/style.css') }}" type="text/css" rel="stylesheet" >
    <link media="all" href="{{ asset('css/layout.css') }}" type="text/css" rel="stylesheet">
    <link media="all" href="{{ asset('css/redmond/jquery-ui.css') }}" type="text/css" rel="stylesheet" >
    <link media="all" href="{{ asset('css/notifications/jquery_notification.css') }}" type="text/css" rel="stylesheet">
{% endblock %}

{% block javascriptshead %} 
   	<script src="{{ asset('js/jquery-1.9.1.min.js') }}" type="text/javascript"></script>
   	<script src="{{ asset('js/promo-jquery-scripts.js') }}" type="text/javascript"></script>
 	<script src="{{ asset('js/notifications/jquery_notification.js') }}" type="text/javascript"></script>
   	<script type="text/javascript">
   		(function(d, s, id) {
  			var js, fjs = d.getElementsByTagName(s)[0];
  			if (d.getElementById(id)) return;
  			js = d.createElement(s); js.id = id;
  			js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1";
  			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
	  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
{% endblock %}

{% block header %}
<div id="fb-root"></div>
<div id="logo" class="left-block">
	<h1>Promoquality - Consultora y Promociones de Marketing Directo. Creat <a href="http://www.ondissenyweb.com">On Disseny Web</a></h1>
	<a title="Promoquality - Consultora y Promociones de Marketing Directo" href="{{ path('PromoBundle_homepage') }}">
	<img alt="Logo promoquality" src="{{ asset('images/logo_promoquality.png') }}"></a>
	
</div>
<div id="menu" class="right-block" >
	<div id="menu-empresa" class="menu-item">
	<h2><a alt="Entrada menú información empresa" title="Entrada menú información empresa" href="{{ path('PromoBundle_empresa') }}">La empresa</a></h2>
	</div>
	<div id="menu-consultoria" class="menu-item">
	<h2><a alt="Entrada menú consultoría" title="Entrada menú consultoría" href="{{ path('PromoBundle_consultoria') }}">Consultoría</a></h2>
	</div>
	<div id="menu-catalogo" class="menu-item">
	<h2><a alt="Entrada menú catálogo de productos" title="Entrada menú catálogo de productos" href="{{ path('PromoBundle_catalogo') }}">Catálogo</a></h2>
	</div>
	<div id="menu-casosexito" class="menu-item">
	<h2><a alt="Entrada menú casos de éxito" title="Entrada menú casos de éxito" href="{{ path('PromoBundle_casosexito') }}">Casos de éxito</a></h2>
	</div>
	<div id="menu-contacto" class="menu-item">
	<h2><a alt="Entrada menú formulario de contacto" title="Entrada menú formulario de contacto" href="{{ path('PromoBundle_contacto') }}">Contacto</a></h2>
	</div>
	{% if admin == true %}
	<div id="admin-connection">
		<a alt="Acceso a los datos del usuario" title="Acceso a los datos del usuario" href="{{ path('PromoBundle_usuari') }}">{{ app.session.get('usuari') }}</a>
		<a alt="Cerrar sesión" title="Cerrar sesión" href="{{ path('PromoBundle_logout') }}">logout</a>
	</div>
	{% endif %}
</div>

{% endblock %}

{% block main %}
<div id="main-contact" class="left-block">
	<img alt="Entrada menú información empresa" title="La empresa" src="{{ asset('images/contact-image.png') }}">
</div>
<div id="main-center" class="right-block">
	<div id="breadcrumb">{% block breadcrumb %}{% endblock %}</div>
	<div id="content">{% block content %}{% endblock %}</div>
</div>

{% endblock %}

{% block footer %}
	<div class="left-block">&nbsp;</div>
	<div id="social-block" class="right-block">
		<div id="facebook-like"><div class="fb-like" data-send="false" data-width="450" data-show-faces="false"></div></div>
		<div id="social-icons">
			<a title="Compartir en Facebook" href="http://www.facebook.com/sharer.php?u={{ app.request.uri }}&t=Promoquality%20-%20Consultora%20y%20Promociones%20de%20Marketing%20Directo%20{% if socialdescription is defined %}-%20{{ socialdescription }}{% endif %}" target="_blank"><img alt="Compartir en Facebook" src="{{ asset('images/facebook-sharing.jpg') }}" ></a>
			<a title="Compartir en Twitter" href="http://twitter.com/share?{% if hashtag is defined %}hashtags={{ hashtag }}&{% endif %}text=Promoquality%20-%20Consultora%20y%20Promociones%20de%20Marketing%20Directo%20{% if socialdescription is defined %}-%20{{ socialdescription }}{% endif %}" target="_blank" data-count="none"><img alt="Compartir en Twitter" src="{{ asset('images/twitter-sharing.png') }}" ></a>
			<!-- <a title="Compartir en Twitter" href="https://twitter.com/share" class="twitter-share-button" data-lang="es" data-count="none"><img alt="Compartir en Twitter" src="{{ asset('images/twitter-sharing.png') }}" ></a> -->
			<a title="Añadir a favoritos" href="#" id="bookmark"><img alt="Añadir a favoritos" src="{{ asset('images/bookmark-add.png') }}" ></a>
			<a title="Enviar enlace por correo" href="mailto:?subject=Te%20recomiendo%20Promoquality&body=Promoquality%20-%20Consultora%20y%20Promociones%20de%20Marketing%20Directo%20{% if socialdescription is defined %}-%20{{ socialdescription }}{% endif %}%20{{ app.request.uri }}"><img alt="Enviar enlace por correo" src="{{ asset('images/email-contacto.png') }}" ></a>
		</div>
	</div>
{% endblock %}

{% block banner %}
<a class="btn-close" alt="Tancar" title="Tancar" href="#"><img alt="Añadir a favoritos" src="{{ asset('images/close.png') }}" ></a>
<a class="btn-contacte" alt="Información libros Diada de Sant Jordi" title="Información libros Diada de Sant Jordi" href="{{ path('PromoBundle_contacto') }}">
<div class="hover-background"></div><div class="normal-background">pídenos información</div></a>
<h2>Día internacional del libro<br/>23 de abril - Sant Jordi</h2>
<p>Regala un libro, con ello contribuirás a la divulgación de la cultura. Tus colaboradores y clientes lo valorarán.</p>
<p>Contacta con nosotros; te buscaremos el libro que necesitas para hacer un regalo inolvidable.</p>
<p class="banner-italic">Un libro, el regalo que satisface al que lo hace y ensalza al que lo recibe</p>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    
    <script type="text/javascript">

    var intro = false;
    
    playIntro = function() {
     	/* Extensions m4v iphone, mp4 android 
     	http://www.w3schools.com/html/html5_video.asp
     	 	*/
    	$("#introsprite").jPlayer({
       		ready: function () {
    	   		$(this).jPlayer("setMedia", {
    	   			m4v: "/media/output.mp4",
    	   			ogv: "/media/output.ogv",
    	   			//webmv: "/media/output.webm",
    	   			poster: "/images/logo_promoquality_big.png" 
    	   		}).jPlayer("play");

    	    	var click = document.ontouchstart === undefined ? 'click' : 'touchstart';
    		    var kickoff = function () {
    		       	$("#introsprite").jPlayer("play");
    		        document.documentElement.removeEventListener(click, kickoff, true);
    		    };
    		    document.documentElement.addEventListener(click, kickoff, true);
    		    
    	   	},
            loop: false,
        	supplied: "webmv, ogv, m4v",
        	size: {
        		width: "600px",
        		height: "450px"	
            },
            backgroundColor: "#ffffff",
        	swfPath: "/js",
        	wmode: "window",
        	solution: "html, flash"
        });
    };
    
    showBanner = function() {
    	
		sessionStorage.setItem('advertOnce','true');

		var maskHeight = $(document).height();
        var maskWidth = $(window).width();
        //Set height and width to mask to fill up the whole screen
        $('.mask').css({'width':maskWidth,'height':maskHeight});
        //transition effect    
        $('.mask').fadeTo("slow",0.6); 

        //Set the popup window to center
        //$(id).css('top',  winH/2-$(id).height()/2);
        
        $('#banner-popup').css('top', maskHeight/2 - $('#banner-popup').height()/2 - 100);
        $('#banner-popup').css('left', maskWidth/2 - $('#banner-popup').width()/2 - 110); // padding-left/2
     
        //transition effect
        $('#banner-popup').fadeIn(2000);

        actionsModalOverlay();
    };
    
    actionsModalOverlay = function() {
	    //if close button is clicked
	    $('.finestra-overlay .close').click(function (e) {
	        //Cancel the link behavior
	        e.preventDefault();
	        $('.mask, .finestra-overlay').hide();
	        $('.finestra-overlay').html('');
	        if (intro !== undefined && intro == true) playIntro();
	    });    
	     
	    //if mask is clicked
	    $('.mask').click(function () {
	        //$(this).hide();
	        $(this).fadeOut("slow"); 
	        $('.finestra-overlay').hide();
	        $('.finestra-overlay').html('');
	        if (intro !== undefined && intro == true) playIntro();
	    });       
		
		$('.btn-close').click(function (e) {
	        //Cancel the link behavior
	        e.preventDefault();
	        $('.mask, .finestra-overlay').hide();
	        $('.finestra-overlay').html('');
	        if (intro !== undefined && intro == true) playIntro();
	    });   
	};
    
	$(document).ready(function(){
		$(".menu-item a").addClass("menu-item-link");
	    if( $("html").hasClass("ie8lte") ) { 
			$(".menu-item-link").addClass("menu-item-ie8lte");
		}
		
		bookmarkClick();
		
		if ($(".sms-notice").length) {
			showNotification({
				message: $(".sms-notice").html(),
				type : "information",
				autoClose: true,
				duration: 4
			});
		}

		//sessionStorage.removeItem('advertOnce'); // Comentar a producció

		// SessionStorage dura mentre navegador obert
		// https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API
		if (sessionStorage.getItem('advertOnce') !== 'true') {
			showBanner();
		} else {
			if (intro !== undefined && intro == true) playIntro();
		}
			 
	});

	$(window).resize(function(){
	 	if ($('#banner-popup').is(":visible")) {
	 		$('.mask, .finestra-overlay').hide();
	 		showBanner();
		}
	}); 
	
	</script>
    
{% endblock %}

